[{"/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/index.js":"1","/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/App.js":"2","/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/reportWebVitals.js":"3","/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/Login.js":"4","/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/CreateAccount.js":"5","/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/Dashboard.js":"6"},{"size":500,"mtime":1608515744455,"results":"7","hashOfConfig":"8"},{"size":2045,"mtime":1610237361331,"results":"9","hashOfConfig":"8"},{"size":362,"mtime":1608515744455,"results":"10","hashOfConfig":"8"},{"size":3057,"mtime":1610237400241,"results":"11","hashOfConfig":"8"},{"size":3731,"mtime":1610254237541,"results":"12","hashOfConfig":"8"},{"size":6323,"mtime":1610252740608,"results":"13","hashOfConfig":"8"},{"filePath":"14","messages":"15","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},"1re9xi",{"filePath":"17","messages":"18","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"19","usedDeprecatedRules":"16"},{"filePath":"20","messages":"21","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"16"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"24","usedDeprecatedRules":"16"},{"filePath":"25","messages":"26","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"27","messages":"28","errorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"16"},"/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/index.js",[],["30","31"],"/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/App.js",["32","33","34","35"],"import logo from \"./logo.svg\";\nimport \"./App.css\";\n\nimport { Row, Col, Container, Button } from \"react-bootstrap\";\n\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Link,\n  useHistory,\n  useRouteMatch,\n} from \"react-router-dom\";\nimport { useState, useEffect } from \"react\";\n\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n\nimport Cookies from \"js-cookie\";\n\n// Internal\nimport { Login } from \"./Login.js\";\nimport { CreateAccount } from \"./CreateAccount.js\";\nimport { Dashboard } from \"./Dashboard.js\";\n\nfunction App() {\n  const [loginKey, setloginKey] = useState(\"\");\n  useEffect(() => {\n    const key = Cookies.get(\"doggo-photos-loginKey\");\n    if (key) {\n      setloginKey(key);\n    }\n  });\n  return (\n    <Router>\n      <Container>\n        <Switch>\n          <Route exact path=\"/\">\n            <StartMenu loginKey={loginKey} setloginKey={setloginKey} />\n          </Route>\n          <Route exact path=\"/login\">\n            <Login setloginKey={setloginKey} />\n          </Route>\n          <Route exact path=\"/create\">\n            <CreateAccount setloginKey={setloginKey} />\n          </Route>\n          <Route exact path=\"/dashboard\">\n            <Dashboard loginKey={loginKey} setloginKey={setloginKey} />\n          </Route>\n        </Switch>\n      </Container>\n    </Router>\n  );\n}\n\nfunction StartMenu({ loginKey, setloginKey }) {\n  const history = useHistory();\n  useEffect(() => {\n    if (loginKey) {\n      history.push(\"/dashboard\");\n    } else {\n      const cookieToken = Cookies.get(\"doggo-photos-loginKey\");\n      if (cookieToken) {\n        setloginKey(cookieToken);\n        history.push(\"/dashboard\");\n      }\n    }\n  });\n\n  let { path, url } = useRouteMatch();\n  return (\n    <Row className=\"center-block text-center start-menu\">\n      <Col>\n        <h1>Doggo Photos</h1>\n        <Link to={`/login`}>\n          <Button variant=\"primary\">Login</Button>\n        </Link>\n        <Link to=\"/create\">\n          <Button variant=\"secondary\">Create Account</Button>\n        </Link>\n      </Col>\n    </Row>\n  );\n}\n\nexport default App;\n","/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/reportWebVitals.js",[],"/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/Login.js",["36"],"import { useForm } from \"react-hook-form\";\nimport { Row, Col, Button, Form, Alert } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { yupResolver } from \"@hookform/resolvers/yup\";\nimport * as yup from \"yup\";\nimport { useState } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport Cookies from \"js-cookie\";\n\nfunction createOnLogin(setloginKey, setLoginError, history) {\n  return (data) => {\n    console.log(data);\n    axios\n      .post(`/api/account/login`, {\n        username: data.username,\n        password: data.password,\n      })\n      .then((res) => {\n        const loginKey = res.data?.loginKey;\n        console.log(\"loginKey\");\n        console.log(loginKey);\n        if (loginKey) {\n          Cookies.set(\"doggo-photos-loginKey\", res.data.loginKey, {\n            expires: 7,\n          });\n          setloginKey(loginKey);\n          history.push(\"/dashboard\");\n          // window.localStorage.setItem(\"loginKey\", res.data.loginKey);\n          // setloginKey(res.data.loginKey);\n          // setUser(res.data.name);\n        } else {\n          const loginError = res.data?.error ? res.data?.error : \"Login Error\";\n          setLoginError(loginError);\n        }\n        console.log(res);\n        console.log(res.data);\n      })\n      .catch((err) => {\n        setLoginError(\"Could not login\");\n      });\n  };\n}\n\nconst schema = yup.object().shape({\n  username: yup.string().required(\"Required\"),\n  password: yup.string().required(\"Required\"),\n});\n\nexport function Login({ setloginKey }) {\n  const [loginError, setLoginError] = useState(\"\");\n  const history = useHistory();\n  const { register, handleSubmit, watch, errors } = useForm({\n    resolver: yupResolver(schema),\n  });\n  return (\n    <Row className=\"vertical-center\">\n      <Col md=\"3\"></Col>\n      <Col>\n        <Form\n          onSubmit={handleSubmit(\n            createOnLogin(setloginKey, setLoginError, history)\n          )}\n        >\n          <Form.Group controlId=\"formBasicEmail\">\n            <Form.Label>Username</Form.Label>\n            <Form.Control\n              name=\"username\"\n              type=\"text\"\n              placeholder=\"Username\"\n              ref={register}\n            />\n          </Form.Group>\n          {errors.username && (\n            <Alert variant=\"warning\">{errors.username?.message}</Alert>\n          )}\n          <Form.Group controlId=\"formBasicPassword\">\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              name=\"password\"\n              type=\"password\"\n              placeholder=\"Password\"\n              ref={register}\n            />\n          </Form.Group>\n          {errors.password && (\n            <Alert variant=\"warning\">{errors.password?.message}</Alert>\n          )}\n          <Button variant=\"primary\" type=\"submit\">\n            Submit\n          </Button>\n        </Form>\n        {loginError ? (\n          <div style={{ marginTop: \"10px\" }}>\n            <Alert variant=\"warning\">{loginError}</Alert>\n          </div>\n        ) : null}\n      </Col>\n      <Col md=\"3\"></Col>\n    </Row>\n  );\n}\n","/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/CreateAccount.js",["37"],"/Users/andrewgamble/go/src/github.com/gamblea/doggo-photos/fe/src/Dashboard.js",["38","39","40","41","42","43","44","45"],"import { useForm } from \"react-hook-form\";\nimport { Row, Col, Button, Form, Alert } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useHistory, Link, useRouteMatch, Route } from \"react-router-dom\";\nimport { useEffect, useState } from \"react\";\nimport Cookies from \"js-cookie\";\nimport Switch from \"react-bootstrap/esm/Switch\";\n\nimport Gallery from \"react-photo-gallery\";\n\nexport function Dashboard({ loginKey, setloginKey }) {\n  const history = useHistory();\n  const [upload, setUpload] = useState(false);\n  const [username, setUsername] = useState(\"\");\n  const [refresh, setRefresh] = useState(0);\n  useEffect(() => {\n    if (loginKey) {\n      axios\n        .post(`/api/account/user`, {\n          loginKey: loginKey,\n        })\n        .then((res) => {\n          const username = res.data?.username;\n          const error = res.data?.error;\n          //const photos = res.data?.photos;\n          if (username) {\n            setUsername(username);\n            setRefresh(refresh + 1);\n          } else {\n          }\n          if (error) {\n            Cookies.remove(\"doggo-photos-loginKey\");\n            setloginKey(\"\");\n          }\n\n          console.log(res);\n          console.log(res.data);\n        })\n        .catch((err) => {\n          Cookies.remove(\"doggo-photos-loginKey\");\n          setloginKey(\"\");\n        });\n    }\n  }, [loginKey]);\n  return (\n    <div style={{ padding: \"5em\" }}>\n      <Row>\n        <Col>\n          {username ? (\n            <div>\n              <Row></Row>\n              <Col md=\"3\"></Col>\n              <Col>\n                <h2 style={{ textAlign: \"center\" }}>\n                  {capitalizeFirstLetter(username)}'s Doggo Photos\n                </h2>\n              </Col>\n              <Col md=\"3\"></Col>\n\n              <Row>\n                <Col>\n                  <div style={{ textAlign: \"center\", minHeight: \"600px\" }}>\n                    <div>\n                      {upload ? (\n                        <UploadPhotos\n                          loginKey={loginKey}\n                          setUpload={setUpload}\n                        />\n                      ) : (\n                        <DogPhotos\n                          refresh={refresh}\n                          loginKey={loginKey}\n                          setloginKey={setloginKey}\n                          setUpload={setUpload}\n                          history={history}\n                        />\n                      )}\n                    </div>\n                  </div>\n                </Col>\n                {/* <Col md=\"6\" style={{ textAlign: \"center\" }}>\n                  Photos\n                </Col>\n                <Col md=\"6\" style={{ textAlign: \"center\" }}>\n                  Adding New Photos\n                </Col> */}\n              </Row>\n            </div>\n          ) : (\n            <div className=\"center-block text-center start-menu\">\n              <p>Please Login</p>\n              <Link to=\"/\">\n                <Button variant=\"primary\">Login</Button>\n              </Link>\n            </div>\n          )}\n        </Col>\n      </Row>\n    </div>\n  );\n}\nfunction capitalizeFirstLetter(word) {\n  return word.length > 0 ? word.charAt(0).toUpperCase() + word.slice(1) : \"\";\n}\n\nfunction CreateLogout(setloginKey, history) {\n  return () => {\n    Cookies.remove(\"doggo-photos-loginKey\");\n    setloginKey(\"\");\n    history.push(\"/\");\n  };\n}\n\n// Need to pull photos from db and create links for them\nfunction DogPhotos({ refresh, loginKey, setloginKey, setUpload, history }) {\n  const [photos, setPhotos] = useState([]);\n  useEffect(() => {\n    // Get Photos\n    axios\n      .post(`/api/account/photos`, {\n        loginKey: loginKey,\n      })\n      .then((res) => {\n        const photos = res.data?.photos;\n        const error = res.data?.error;\n        //const photos = res.data?.photos;\n        if (photos) {\n          setPhotos(photos);\n        } else {\n          const err = error ? error : \"Error\";\n          // set error state\n        }\n        // if (photos) {\n        //   setPhotos(photos);\n        // }\n\n        console.log(res);\n        console.log(res.data);\n      });\n  }, [refresh]);\n  console.log(photos);\n  return (\n    <div>\n      <div style={{ minHeight: \"400px\" }}>\n        {photos.length <= 0 ? (\n          <p>Add some photos of cute dogs!</p>\n        ) : (\n          <div>\n            <Gallery\n              photos={photos.map((photo) => {\n                if (!photo.src.includes(\"key\")) {\n                  photo.src = photo.src + `?key=${loginKey}`;\n                }\n                return photo;\n              })}\n            />\n          </div>\n        )}\n      </div>\n      <Row>\n        <Col>\n          <Button\n            variant=\"primary\"\n            style={{ float: \"left\" }}\n            onClick={() => {\n              setUpload(true);\n            }}\n          >\n            Upload Photos\n          </Button>\n        </Col>\n        <Col>\n          <Button\n            variant=\"primary\"\n            style={{ float: \"right\" }}\n            onClick={CreateLogout(setloginKey, history)}\n          >\n            Logout\n          </Button>\n        </Col>\n      </Row>\n    </div>\n  );\n}\n\nfunction UploadPhotos({ loginKey, setUpload }) {\n  return (\n    <div>\n      <Row>\n        <Col md=\"4\"></Col>\n        <Col md=\"4\">\n          <div\n            style={{\n              minHeight: \"400px\",\n              margin: \"0 auto\",\n              textAlign: \"center\",\n            }}\n          >\n            <Form onSubmit={createSubmitUpload(loginKey)}>\n              <Form.Group controlId=\"files\">\n                <Form.Label>Upload Photos</Form.Label>\n                <Form.Control name=\"photos\" type=\"file\" multiple />\n              </Form.Group>\n              <Button variant=\"primary\" type=\"submit\">\n                Submit\n              </Button>\n            </Form>\n          </div>\n        </Col>\n        <Col md=\"4\"></Col>\n      </Row>\n\n      <Button\n        style={{ float: \"left\" }}\n        onClick={() => {\n          setUpload(false);\n        }}\n      >\n        Back\n      </Button>\n    </div>\n  );\n}\n\nfunction createSubmitUpload(loginKey) {\n  return function (event) {\n    event.preventDefault();\n    const data = new FormData(event.target);\n\n    data.set(\"loginKey\", loginKey);\n    axios.post(`/api/photos/upload`, data).then((res) => {\n      console.log(res);\n    });\n  };\n}\n",{"ruleId":"46","replacedBy":"47"},{"ruleId":"48","replacedBy":"49"},{"ruleId":"50","severity":1,"message":"51","line":1,"column":8,"nodeType":"52","messageId":"53","endLine":1,"endColumn":12},{"ruleId":"54","severity":1,"message":"55","line":27,"column":3,"nodeType":"52","endLine":27,"endColumn":12,"suggestions":"56"},{"ruleId":"50","severity":1,"message":"57","line":69,"column":9,"nodeType":"52","messageId":"53","endLine":69,"endColumn":13},{"ruleId":"50","severity":1,"message":"58","line":69,"column":15,"nodeType":"52","messageId":"53","endLine":69,"endColumn":18},{"ruleId":"50","severity":1,"message":"59","line":52,"column":35,"nodeType":"52","messageId":"53","endLine":52,"endColumn":40},{"ruleId":"50","severity":1,"message":"59","line":58,"column":35,"nodeType":"52","messageId":"53","endLine":58,"endColumn":40},{"ruleId":"50","severity":1,"message":"60","line":1,"column":10,"nodeType":"52","messageId":"53","endLine":1,"endColumn":17},{"ruleId":"50","severity":1,"message":"61","line":2,"column":34,"nodeType":"52","messageId":"53","endLine":2,"endColumn":39},{"ruleId":"50","severity":1,"message":"62","line":4,"column":28,"nodeType":"52","messageId":"53","endLine":4,"endColumn":41},{"ruleId":"50","severity":1,"message":"63","line":4,"column":43,"nodeType":"52","messageId":"53","endLine":4,"endColumn":48},{"ruleId":"50","severity":1,"message":"64","line":7,"column":8,"nodeType":"52","messageId":"53","endLine":7,"endColumn":14},{"ruleId":"54","severity":1,"message":"65","line":44,"column":6,"nodeType":"66","endLine":44,"endColumn":16,"suggestions":"67"},{"ruleId":"50","severity":1,"message":"68","line":130,"column":17,"nodeType":"52","messageId":"53","endLine":130,"endColumn":20},{"ruleId":"54","severity":1,"message":"69","line":140,"column":6,"nodeType":"66","endLine":140,"endColumn":15,"suggestions":"70"},"no-native-reassign",["71"],"no-negated-in-lhs",["72"],"no-unused-vars","'logo' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect contains a call to 'setloginKey'. Without a list of dependencies, this can lead to an infinite chain of updates. To fix this, pass [] as a second argument to the useEffect Hook.",["73"],"'path' is assigned a value but never used.","'url' is assigned a value but never used.","'watch' is assigned a value but never used.","'useForm' is defined but never used.","'Alert' is defined but never used.","'useRouteMatch' is defined but never used.","'Route' is defined but never used.","'Switch' is defined but never used.","React Hook useEffect has missing dependencies: 'refresh' and 'setloginKey'. Either include them or remove the dependency array. If 'setloginKey' changes too often, find the parent component that defines it and wrap that definition in useCallback.","ArrayExpression",["74"],"'err' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'loginKey'. Either include it or remove the dependency array.",["75"],"no-global-assign","no-unsafe-negation",{"desc":"76","fix":"77"},{"desc":"78","fix":"79"},{"desc":"80","fix":"81"},"Add dependencies array: []",{"range":"82","text":"83"},"Update the dependencies array to be: [loginKey, refresh, setloginKey]",{"range":"84","text":"85"},"Update the dependencies array to be: [loginKey, refresh]",{"range":"86","text":"87"},[697,697],", []",[1343,1353],"[loginKey, refresh, setloginKey]",[4110,4119],"[loginKey, refresh]"]